<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextGen Hub - لوحة المراقبة المتقدمة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', system-ui, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%); }
        .glass-effect { backdrop-filter: blur(10px); background: rgba(15, 23, 42, 0.8); }
        .metric-card { transition: all 0.3s ease; }
        .metric-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .status-indicator { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .chart-container { position: relative; height: 300px; }
        .sidebar { transition: transform 0.3s ease; }
        .sidebar.collapsed { transform: translateX(-100%); }
        .main-content { transition: margin-right 0.3s ease; }
        .main-content.expanded { margin-right: 0; }
    </style>
</head>
<body class="gradient-bg text-white min-h-screen">
    <!-- Header -->
    <header class="glass-effect border-b border-slate-700/50 sticky top-0 z-50">
        <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center gap-4">
                <button id="sidebar-toggle" class="lg:hidden p-2 rounded-lg hover:bg-slate-700/50">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-emerald-500 to-blue-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-server text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">NextGen Hub</h1>
                        <p class="text-sm text-slate-300">لوحة المراقبة المتقدمة</p>
                    </div>
                </div>
            </div>
            
            <div class="flex items-center gap-4">
                <div class="hidden md:flex items-center gap-6 text-sm">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-emerald-500 rounded-full status-indicator"></div>
                        <span>النظام متصل</span>
                    </div>
                    <div>آخر تحديث: <span id="last-update" class="text-emerald-400">الآن</span></div>
                </div>
                <div class="flex items-center gap-2">
                    <select id="language-selector" class="bg-slate-700/50 text-white rounded-lg px-3 py-2 text-sm border border-slate-600">
                        <option value="ar">العربية</option>
                        <option value="en">English</option>
                    </select>
                    <button class="p-2 rounded-lg hover:bg-slate-700/50">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar w-64 glass-effect border-l border-slate-700/50 h-screen sticky top-16 z-40">
            <nav class="p-4">
                <ul class="space-y-2">
                    <li><a href="#overview" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700/50 transition-colors">
                        <i class="fas fa-tachometer-alt w-5"></i> نظرة عامة
                    </a></li>
                    <li><a href="#projects" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700/50 transition-colors">
                        <i class="fas fa-project-diagram w-5"></i> المشاريع
                    </a></li>
                    <li><a href="#monitoring" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700/50 transition-colors">
                        <i class="fas fa-chart-line w-5"></i> المراقبة
                    </a></li>
                    <li><a href="#logs" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700/50 transition-colors">
                        <i class="fas fa-file-alt w-5"></i> السجلات
                    </a></li>
                    <li><a href="#settings" class="nav-link flex items-center gap-3 p-3 rounded-lg hover:bg-slate-700/50 transition-colors">
                        <i class="fas fa-cogs w-5"></i> الإعدادات
                    </a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="main-content flex-1 p-6 mr-64">
            <!-- Overview Section -->
            <section id="overview-section" class="space-y-6">
                <!-- System Stats -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="metric-card glass-effect rounded-xl p-6 border border-slate-700/50">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-400 text-sm">إجمالي المشاريع</p>
                                <p id="total-projects" class="text-3xl font-bold text-white">0</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-project-diagram text-blue-400 text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center gap-2">
                            <span class="text-emerald-400 text-sm">+12%</span>
                            <span class="text-slate-400 text-sm">من الشهر الماضي</span>
                        </div>
                    </div>

                    <div class="metric-card glass-effect rounded-xl p-6 border border-slate-700/50">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-400 text-sm">قيد التشغيل</p>
                                <p id="running-projects" class="text-3xl font-bold text-emerald-400">0</p>
                            </div>
                            <div class="w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-play text-emerald-400 text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center gap-2">
                            <span class="text-emerald-400 text-sm">88%</span>
                            <span class="text-slate-400 text-sm">معدل التشغيل</span>
                        </div>
                    </div>

                    <div class="metric-card glass-effect rounded-xl p-6 border border-slate-700/50">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-400 text-sm">استخدام المعالج</p>
                                <p id="cpu-usage" class="text-3xl font-bold text-yellow-400">0%</p>
                            </div>
                            <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-microchip text-yellow-400 text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="cpu-bar" class="bg-yellow-400 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card glass-effect rounded-xl p-6 border border-slate-700/50">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-400 text-sm">استخدام الذاكرة</p>
                                <p id="memory-usage" class="text-3xl font-bold text-purple-400">0 MB</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-memory text-purple-400 text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="w-full bg-slate-700 rounded-full h-2">
                                <div id="memory-bar" class="bg-purple-400 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="glass-effect rounded-xl p-6 border border-slate-700/50">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-chart-line text-emerald-400"></i>
                            أداء النظام
                        </h3>
                        <div class="chart-container">
                            <canvas id="performance-chart"></canvas>
                        </div>
                    </div>

                    <div class="glass-effect rounded-xl p-6 border border-slate-700/50">
                        <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i class="fas fa-chart-pie text-blue-400"></i>
                            توزيع حالة المشاريع
                        </h3>
                        <div class="chart-container">
                            <canvas id="status-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="glass-effect rounded-xl p-6 border border-slate-700/50">
                    <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                        <i class="fas fa-history text-orange-400"></i>
                        النشاط الأخير
                    </h3>
                    <div id="activity-feed" class="space-y-3">
                        <!-- Activity items will be populated here -->
                    </div>
                </div>
            </section>

            <!-- Projects Section -->
            <section id="projects-section" class="hidden space-y-6">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold">إدارة المشاريع</h2>
                    <button id="add-project-btn" class="bg-emerald-600 hover:bg-emerald-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-plus mr-2"></i> إضافة مشروع
                    </button>
                </div>

                <div id="projects-grid" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- Project cards will be populated here -->
                </div>
            </section>

            <!-- Monitoring Section -->
            <section id="monitoring-section" class="hidden space-y-6">
                <h2 class="text-2xl font-bold">مراقبة متقدمة</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="glass-effect rounded-xl p-6 border border-slate-700/50">
                        <h3 class="text-lg font-semibold mb-4">استخدام الموارد بمرور الوقت</h3>
                        <div class="chart-container">
                            <canvas id="resource-timeline-chart"></canvas>
                        </div>
                    </div>

                    <div class="glass-effect rounded-xl p-6 border border-slate-700/50">
                        <h3 class="text-lg font-semibold mb-4">إحصائيات الأخطاء</h3>
                        <div class="chart-container">
                            <canvas id="errors-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Logs Section -->
            <section id="logs-section" class="hidden space-y-6">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold">سجلات النظام</h2>
                    <div class="flex items-center gap-3">
                        <select id="log-project-select" class="bg-slate-800 border border-slate-600 rounded-lg px-3 py-2">
                            <option value="">جميع المشاريع</option>
                        </select>
                        <button id="clear-logs-btn" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-trash mr-2"></i> مسح السجلات
                        </button>
                    </div>
                </div>

                <div class="glass-effect rounded-xl border border-slate-700/50">
                    <div class="p-4 border-b border-slate-700/50">
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-emerald-500 rounded-full"></div>
                                <span class="text-sm">مباشر</span>
                            </div>
                            <div class="text-sm text-slate-400">آخر 1000 سطر</div>
                        </div>
                    </div>
                    <div id="logs-container" class="p-4 h-96 overflow-y-auto font-mono text-sm bg-slate-950/50">
                        <!-- Logs will be populated here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Project Modal -->
    <div id="project-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center p-4 z-50">
        <div class="glass-effect rounded-xl w-full max-w-2xl p-6 border border-slate-700/50">
            <h3 class="text-xl font-semibold mb-6">إضافة مشروع جديد</h3>
            <form id="project-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">معرف المشروع</label>
                        <input name="id" type="text" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">اسم المشروع</label>
                        <input name="name" type="text" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">مجلد العمل</label>
                        <div class="flex gap-2">
                            <input id="working_dir" name="working_dir" type="text" class="flex-1 bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" required readonly>
                            <button type="button" id="select-folder-btn" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors whitespace-nowrap">
                                <i class="fas fa-folder-open ml-2"></i>
                                اختيار مجلد
                            </button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">الأمر</label>
                        <input id="command" name="command" type="text" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" value="python" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">عدد النسخ</label>
                        <input name="instances" type="number" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" value="1" min="1" max="64">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">المنفذ</label>
                        <input name="port" type="number" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">معاملات التشغيل</label>
                    <input id="args" name="args" type="text" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2" placeholder="app.py --port 8000">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">الملف التنفيذي المكتشف</label>
                    <select name="detected_executable" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2">
                        <option value="">لم يتم اكتشاف ملفات تنفيذية</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">مسار ملف السجل</label>
                    <input name="log_path" type="text" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">الوصف</label>
                    <textarea name="description" class="w-full bg-slate-800 border border-slate-600 rounded-lg px-3 py-2 h-20"></textarea>
                </div>
                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" id="cancel-project-btn" class="px-4 py-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors">
                        إلغاء
                    </button>
                    <button type="submit" class="px-4 py-2 bg-emerald-600 hover:bg-emerald-700 rounded-lg transition-colors">
                        حفظ المشروع
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>